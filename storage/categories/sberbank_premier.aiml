<?xml version="1.0" encoding="UTF-8"?>
<aiml version="2.0">

<!-- вход в Сбербанк Премьер. -->

    <category>
        <pattern> ^ <regex pattern="ЧТО.*|УСЛЫШ.*|УЗНАТ.*|.*СКА(Ж|З).*" /> ^ <regex pattern="ПРЕМЬЕР.*" /> ^ </pattern>
        <template>
            Это специально разработанный пакет услуг для наших состоятельных клиентов. Хотите услышать о предоставляемых услугах в пакете Сбербанк Премьер?
        </template>
    </category>

    <!--да\нет-->

       <category>
            <pattern> ^ <regex pattern="ДА|.*СКАЖИ|ОК|ЛАДНО|ХОРОШО|ДАВАЙ|ХОЧ(У|ЕТСЯ)|ГОВОРИ|ИНТЕРЕС|ЛА.*|ОКЕЙ" /> ^ </pattern>
            <that> ХОТИТЕ УСЛЫШАТЬ О ПРЕДОСТАВЛЯЕМЫХ УСЛУГАХ В ПАКЕТЕ СБЕРБАНК ПРЕМЬЕР </that>
            <template><srai>OK001</srai><srai>УСЛУГ СБЕРБАНК ПРЕМЬЕР</srai></template>
        </category>

        <category>
            <pattern> ^ <regex pattern="НЕ.*" /> ^ </pattern>
            <that> ХОТИТЕ УСЛЫШАТЬ О ПРЕДОСТАВЛЯЕМЫХ УСЛУГАХ В ПАКЕТЕ СБЕРБАНК ПРЕМЬЕР </that>
            <template><think><set name="topic">unknown</set></think><srai>OK001</srai> Чем еще я могу вам помочь?</template>
        </category>

        <category>
            <pattern>*</pattern>
            <that> ХОТИТЕ УСЛЫШАТЬ О ПРЕДОСТАВЛЯЕМЫХ УСЛУГАХ В ПАКЕТЕ СБЕРБАНК ПРЕМЬЕР </that>
            <template>
                <condition name="flag_MU">
                    <li value="unknown">
                        <think>
                            <set name="flag_MU">1</set>
                        </think>
                        <srai>YN001</srai> Если Вам не интересно, повторите вопрос. Хотите услышать о предоставляемых услугах в пакете Сбербанк Премьер?
                    </li>
                    <li value="1">
                        <think>
                            <set name="flag_MU">unknown</set>
                            <set name="topic">unknown</set>
                        </think>
                        <sr />
                    </li>
                </condition>
            </template>
        </category>

<!-- услуги Сбербанк Премьер-->

    <category>
        <pattern> ^ <regex pattern="УСЛУГ.*|БОНУС.*" /> ^ <regex pattern="ПРЕМЬЕР.*" /> ^</pattern>
        <template>
            В пакет услуг входят особые карты, вклады, выгодный
            обмен валюты, перональная сейфововая ячейка, страхование и партнёрские услуги.   
            О чём хотите узнать? 
            <think>
                <set name="topic">sbpr_theme_choice</set>
            </think>
        </template>
    </category>

        <topic name="sbpr_theme_choice">

            <category>
                <pattern> ^ ВСЕ ^ </pattern>
                <template>
                    Не многовато? Давайте остановимся на чём-нибудь одном. 
                    <srai>УСЛУГ СБЕРБАНК ПРЕМЬЕР</srai>
                </template>
            </category>
        
        <!--карты -->

            <category>
                <pattern> ^ <regex pattern="КАРТ.*" /> ^ </pattern>
                <template>
                    В пакете Сбербанк премьер есть две элитные карты: одна с MASTERCARD, вторая с VISA. 
                    Я думаю, Вас порадуют условия для держателей карт: 
                    бесплатное обслуживание, бесплатный перевыпуск, выдача любой суммы без комиссии, где бы то ни было. 
                    Оформляем?
                </template>
            </category>

        <!--вклады сделал по структуре первого, там немного другие условия -->
            
            <category>
                <pattern> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                <template>Для клиентов сбербанк премьер доступны вклады особый сохраняй, особый пополняй, особый управляй. Хотите узнать о вкладах больше?</template>
            </category>

            <!--YN_deposits-->
                <category>
                    <pattern> ^ <regex pattern="ДА|.*СКАЖИ|ОК|ЛАДНО|ХОРОШО|ДАВАЙ|ХОЧ(У|ЕТСЯ)|ГОВОРИ|ИНТЕРЕС|ЛА.*|ОКЕЙ" /> ^ </pattern>
                    <that> ХОТИТЕ УЗНАТЬ О ВКЛАДАХ БОЛЬШЕ </that>
                    <template><think><set name = "topic">sbpr_card_vklad</set></think><srai>OK001</srai><srai>DIALOG2 DEPOSITS</srai></template>
                </category>

                <category>
                    <pattern> ^ <regex pattern="НЕ.*" /> ^ </pattern>
                    <that> ХОТИТЕ УЗНАТЬ О ВКЛАДАХ БОЛЬШЕ </that>
                    <template><srai>OK001</srai> Чем еще я могу вам помочь?</template>
                </category>

                <category>
                    <pattern>*</pattern>
                    <that> ХОТИТЕ УЗНАТЬ О ВКЛАДАХ БОЛЬШЕ </that>
                    <template>
                        <condition name="flag_MU">
                            <li value="unknown">
                                <think>
                                    <set name="flag_MU">1</set>
                                </think>
                                <srai>YN001</srai>Если вклады Вам не интересны, повторите вопрос. Хотите узнать о вкладах больше?
                            </li>
                            <li value="1">
                                <think>
                                    <set name="flag_MU">unknown</set>
                                    <set name="topic">unknown</set>
                                </think>
                                <sr />
                            </li>
                        </condition>
                    </template>
                </category>

        <!--валюта-->
            <!-- здесь как раз можно было прикрутить механизм представления актуального курса для премьер клиентов
            например, он есь здесь: https://www.sberbank.ru/ru/quotes/currenciespremier -->

            <category>
                <pattern> ^ <regex pattern="ОБМЕН.*|ВАЛЮТ.*" /> ^ </pattern>
                <template> Для клиентов Сбербанк Премьер обмен валюты производится по специальному курсу
                  разница с биржевым  составляет 25 копеек. В пользу клиента, конечно.</template>
            </category>

            <category>
                <pattern> ^ <regex pattern="КАК(УЮ|ИЕ|АЯ)" /> <regex pattern="ВАЛЮТ.*" /> ^ </pattern>
                <template>В отделениях Сбербанка вы можете обменять американские и канадские доллары, евро, английские фунты, йены, швейцарские франки, юани, чешские и норвежские кроны, казахстанский тенгэ.</template>
            </category>

        <!--сейфовая ячейка-->
            <category>
                    <pattern> ^ <regex pattern="СЕЙФ.*|ЯЧЕЙК.*"/> ^ </pattern>
                    <template>сбербанк предоставляет своим клиентам индивидуальные банковские сейфы 
                    для надежного хранения ценностей и документов со скидкой в 20 %. Рассказать о сейфе?</template>     
            </category>
            
            <!--YN-->

                <category>
                    <pattern> ^ <regex pattern="ДА|.*СКАЖИ|ОК|ЛАДНО|ХОРОШО|ДАВАЙ|ХОЧ(У|ЕТСЯ)|ГОВОРИ|ИНТЕРЕС|ЛА.*|ОКЕЙ" /> ^ </pattern>
                    <that> РАССКАЗАТЬ О СЕЙФЕ </that>
                    <template><think><set name = "topic">sbpr_vault</set></think><srai>OK001</srai><srai>DIALOG2 VAULT</srai></template>
                </category>

                <category>
                    <pattern> ^ <regex pattern="НЕ.*" /> ^ </pattern>
                    <that> РАССКАЗАТЬ О СЕЙФЕ </that>
                    <template><srai>OK001</srai> Чем еще я могу вам помочь?</template>
                </category>

                <category>
                    <pattern>*</pattern>
                    <that> РАССКАЗАТЬ О СЕЙФЕ </that>
                    <template>
                        <condition name="flag_MU">
                            <li value="unknown">
                                <think>
                                    <set name="flag_MU">1</set>
                                </think>
                                <srai>YN001</srai>Если услуга сейф вам не интересна, повторите вопрос. Рассказать о сейфе?
                            </li>
                            <li value="1">
                                <think>
                                    <set name="flag_MU">unknown</set>
                                    <set name="topic">unknown</set>
                                </think>
                                <sr />
                            </li>
                        </condition>
                    </template>
                </category>
        <!--партнерские услуги-->
            <category>
                    <pattern> ^ <regex pattern="ПАРТНЕР.*" /> ^ <regex pattern="УСЛУГ.*" /> ^ </pattern>
                    <template><srai>OK001</srai> Партнёрские услуги, которые предоставляет сбербанк,- это страхование, медицинские услуги и приорити пасс. Хотите узнать о партнерских услугах поподробнее? </template>
                </category>
                    <category>
                        <pattern> ^ <regex pattern="ДА|.*СКАЖИ|ОК|ЛАДНО|ХОРОШО|ДАВАЙ|ХОЧ(У|ЕТСЯ)|ГОВОРИ|ИНТЕРЕС|ЛА.*|ОКЕЙ" /> ^ </pattern>
                        <that> ХОТИТЕ УЗНАТЬ О ПАРТНЕРСКИХ УСЛУГАХ ПОПОДРОБНЕЕ </that>
                        <template><think><set name = "topic">sb_1_partners_services</set></think><srai>OK001</srai><srai>DIALOG1 PARTNER</srai></template>
                    </category>
                    <category>
                        <pattern> ^ <regex pattern="НЕ.*" /> ^ </pattern>
                        <that> ХОТИТЕ УЗНАТЬ О ПАРТНЕРСКИХ УСЛУГАХ ПОПОДРОБНЕЕ </that>
                        <template><srai>OK001</srai> Чем еще я могу вам помочь?</template>
                    </category>
                    <category>
                        <pattern>*</pattern>
                        <that> ХОТИТЕ УЗНАТЬ О ПАРТНЕРСКИХ УСЛУГАХ ПОПОДРОБНЕЕ </that>
                        <template>
                            <condition name="flag_MU">
                                <li value="unknown">
                                    <think>
                                        <set name="flag_MU">1</set>
                                    </think>
                                    <srai>YN001</srai>Если подробности Вам не интересны, повторите вопрос. Хотите узнать о партнерских услугах поподробнее?
                                </li>
                                <li value="1">
                                    <think>
                                        <set name="flag_MU">unknown</set>
                                        <set name="topic">unknown</set>
                                    </think>
                                    <sr />
                                </li>
                            </condition>
                        </template>
                    </category>
        <!--не понятно-->

            <category>
                <pattern>*</pattern>
                <template>
                    <condition name="flag_MU">
                        <li value="unknown">
                            <think>
                                <set name="flag_MU">1</set>
                            </think>
                            <srai>MU001</srai><srai>УСЛУГ СБЕРБАНК ПРЕМЬЕР</srai>
                        </li>
                        <li value="1">
                            <think>
                                <set name="flag_MU">unknown</set>
                                <set name="topic">unknown</set>
                            </think>
                            <sr />
                        </li>
                    </condition>
                </template>
            </category>

        </topic>

            <!--вклад-->

                <topic name="sbpr_card_vklad">

                    <category>
                        <pattern>DIALOG2 DEPOSITS</pattern>
                        <template>О каком именно вкладе Вам рассказать? Особый Сохраняй, Особый Пополняй, Особый Управляй</template>
                    </category>

                    <category>
                        <pattern> ^ <regex pattern="СОХРАН.*" /> ^ </pattern>
                        <template>
                           Минимальная сумма вклада 700 000 рублей, 50 000 долларов. 
                           Минимальный процент по данному вкладу в рублях 4,20%. Максимальный 5,65% 
                            Могу рассказать про валюту вклада, снятие денег и пополнение вклада.
                            <think><set name = "topic">sbpr_card_vklad_lsohranyai</set></think>
                        </template>
                    </category>

                    <category>
                        <pattern> ^ <regex pattern="ПОПОЛН.*" /> ^ </pattern>
                        <template>
                            Минимальная сумма вклада 700 000 рублей, 50 000 долларов. 
                            Минимальный процент по данному вкладу в рублях 4,75%. Максимальный 5,20%.
                            Могу рассказать про валюту вклада, снятие денег и пополнение вклада.
                            <think><set name = "topic">sbpr_card_vklad_lpopolnyai</set></think>
                        </template>
                    </category>

                    <category>
                        <pattern> ^ <regex pattern="УПРАВЛ.*" /> ^ </pattern>
                        <template>
                            Минимальная сумма вклада 700 000 рублей, 50 000 долларов. 
                            Минимальный процент по данному вкладу в рублях 4,10%. Максимальный 4,90%.
                            Могу рассказать про валюту вклада, снятие денег и пополнение вклада.
                            <think><set name = "topic">sbpr_card_vklad_luprvlyai</set></think>
                        </template>
                    </category>

                    <category>
                        <pattern>*</pattern>
                        <template>
                            <condition name="flag_MU">
                                <li value="unknown">
                                    <think>
                                        <set name="flag_MU">1</set>
                                    </think>
                                    <srai>MU001</srai><srai>DIALOG2 DEPOSITS</srai> Если вклады Вам не интересны, повторите вопрос.
                                </li>
                                <li value="1">
                                    <think>
                                        <set name="flag_MU">unknown</set>
                                        <set name="topic">sbpr_theme_choice</set>
                                    </think>
                                    <sr />
                                </li>
                            </condition>
                        </template>
                    </category>
                </topic>

                <!-- вклад особый сохраняй отличается от первый -->
                    <topic name="sbpr_card_vklad_lsohranyai">

                        <category>
                            <pattern> ^ <regex pattern="ВАЛЮТ.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Валюта вклада рубли и доллары. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СНЯТ.*" /> ^ <regex pattern="ДЕНЬГ.*" /> ^ </pattern>
                            <template>На этом вкладе такая опция не предусмотрена. Оформляем?</template>
                        </category>
                        
                        <category>
                            <pattern> ^ <regex pattern="ПОПОЛН.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Этот вклад пополнть нельзя. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="ПРОЦЕНТ.*" /> ^ <regex pattern="ДОБАВ.*" /> ^ </pattern>
                            <template><srai>ПОПОЛН ВКЛАД</srai></template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СРОК.*" /> ^ </pattern>
                            <template>Срок вклада особый сохраняй от 1 месяца до 3 лет включительно. Оформляем?</template>
                        </category>

                        <category>
                            <pattern>*</pattern>
                            <template>
                                <condition name="flag_MU">
                                    <li value="unknown">
                                        <think>
                                            <set name="flag_MU">1</set>
                                        </think>
                                        <srai>MU001</srai>Могу рассказать про валюту вклада, снятие денег и пополнение вклада. Если вклад Вам не интересен, повторите вопрос.
                                    </li>
                                    <li value="1">
                                        <think>
                                            <set name="flag_MU">unknown</set>
                                            <set name="topic">sbpr_card_vklad</set>
                                        </think>
                                        <sr />
                                    </li>
                                </condition>
                            </template>
                        </category>
                    </topic>

                <!--вклад особый поплняй-->
                    <topic name="sbpr_card_vklad_lpopolnyai">

                        <category>
                            <pattern> ^ <regex pattern="ВАЛЮТ.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Валюта вклада рубли и доллары. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СНЯТ.*|СНИМ.*" /> ^ <regex pattern="ДЕНЬГ.*" /> ^ </pattern>
                            <template>Пополнение данного вклада не предусмотрено. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="ПОПОЛН.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Да, вы можете пополнять вклад, процентная ставка увеличивается автоматически. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="ПРОЦЕНТ.*" /> ^ <regex pattern="ДОБАВ.*" /> ^ </pattern>
                            <template><srai>ПОПОЛН ВКЛАД</srai></template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СРОК.*" /> ^ </pattern>
                            <template>Срок вклада особый пополняй от 3 месяцев до 3 лет. Оформляем?</template>
                        </category>

                        <category>
                            <pattern>*</pattern>
                            <template>
                                <condition name="flag_MU">
                                    <li value="unknown">
                                        <think>
                                            <set name="flag_MU">1</set>
                                        </think>
                                        <srai>MU001</srai>Могу рассказать про валюту вклада, снятие денег и пополнение вклада. Если вклад Вам не интересен, повторите вопрос.
                                    </li>
                                    <li value="1">
                                        <think>
                                            <set name="flag_MU">unknown</set>
                                            <set name="topic">sbpr_card_vklad</set>
                                        </think>
                                        <sr />
                                    </li>
                                </condition>
                            </template>
                        </category>
                    </topic>

                <!--вклад особый управляй-->

                    <topic name="sbpr_card_vklad_luprvlyai">

                        <category>
                            <pattern> ^ <regex pattern="ВАЛЮТ.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Валюта вклада рубли и доллары. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СНЯТ.*" /> ^ <regex pattern="ДЕНЬГ.*" /> ^ </pattern>
                            <template>Да,вы можете снять деньги до уровня неснижаемого остатка. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="ПОПОЛН.*" /> ^ <regex pattern="ВКЛАД.*" /> ^ </pattern>
                            <template>Да, вы можете пополнять вклад, процентная ставка увеличивается автоматически. Оформляем?</template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="ПРОЦЕНТ.*" /> ^ <regex pattern="ДОБАВ.*" /> ^ </pattern>
                            <template><srai>ПОПОЛН ВКЛАД</srai></template>
                        </category>

                        <category>
                            <pattern> ^ <regex pattern="СРОК.*" /> ^ </pattern>
                            <template>Срок вклада особый управляй от 3 месяцев до 3 лет. Оформляем?</template>
                        </category>

                        <category>
                            <pattern>*</pattern>
                            <template>
                                <condition name="flag_MU">
                                    <li value="unknown">
                                        <think>
                                            <set name="flag_MU">1</set>
                                        </think>
                                        <srai>MU001</srai>Могу рассказать про валюту вклада, снятие денег и пополнение вклада. Если вклад Вам не интересен, повторите вопрос.
                                    </li>
                                    <li value="1">
                                        <think>
                                            <set name="flag_MU">unknown</set>
                                            <set name="topic">sbpr_card_vklad</set>
                                        </think>
                                        <sr />
                                    </li>
                                </condition>
                            </template>
                        </category>

                    </topic>

            <!-- сейф -->
                <topic name="sbpr_vault">
                    <category>
                        <pattern>DIALOG2 VAULT</pattern>
                        <template>Я могу рассказать о том, что можно хранить в сейфе, сроках аренды и размерах ячейки</template>
                    </category>
                    <category>
                        <pattern> ^ <regex pattern="ЧТО|ХРАН.*" /> ^ <regex pattern="ХРАН.*" /></pattern>
                        <template>Вы можете хранить драгоценности, наличные деньги, ценные бумаги, монеты 
                        и слитки, важные документы и даже личную переписку</template>
                    </category>
                    <category>
                        <pattern> ^ <regex pattern="СКОЛЬКО|СРОК.*" /> ^  </pattern>
                        <template>Вы можете выбрать срок от одного дня до трех лет.  С возможностью продления! </template>
                    </category>

                    <category>
                        <pattern> ^ <regex pattern="РАЗМЕР.*" /> ^ </pattern>
                        <template>Вы можете выбрпть размер ячейки от 31 до 62 сантиметров, высота от 4 до 60 сантиметров.</template>
                    </category>

                    <category>
                        <pattern>*</pattern>
                        <template>
                            <condition name="flag_MU">
                                <li value="unknown">
                                    <think>
                                        <set name="flag_MU">1</set>
                                    </think>
                                    <srai>MU001</srai><srai>DIALOG2 VAULT</srai> Если сейфы Вам не интересны, повторите вопрос.
                                </li>
                                <li value="1">
                                    <think>
                                        <set name="flag_MU">unknown</set>
                                        <set name="topic">sbpr_theme_choice</set>
                                    </think>
                                    <sr />
                                </li>
                            </condition>
                        </template>
                    </category>

                </topic>
<!--остальное-->

    <category>
        <pattern> ^ <regex pattern="КАК.*" /> ^ <regex pattern="КЛИЕНТ.*" /> ^ ПРЕМЬЕР ^ </pattern>
        <template>
            Услуги Премьер подключаются автоматически, если на васших счетах хранится больше двух миллионов рублей, 
            вы инвестировали более 500 тысяч рублей, а также, если ваша зарплата достигает двухсот тысяч рублей в месяц. 
        </template>
    </category>

    <category>
        <pattern> ^ <regex pattern="ОТЛИЧ.*" /> ^ <regex pattern="ПРЕМИУМ.*" /> ^ </pattern>
        <template>
        Для клиентов сбербанк первый мы предоставляем сервис высочайшего уровня, 
        возможность приобрести банковские продукты на выгоднях условиях, специальные условия и 
        программы страхования, возможность открытия депозитов под более высокий процент, получение премиальных пластиковых карт, 
        получение карты priority pass.
        </template>
    </category>

     <category>
            <pattern> ^ <regex pattern="ЛЬГОТ.*" /> ^ </pattern>
            <template>Как раз сейчас вы можете получить льготный период использования пакета услуг премьер сроком на два месяца. Оформляем?</template>
    </category>

    <category>
        <pattern> ^ <regex pattern="ДОСТУП.*" /> ^ <regex pattern="ПРЕМИАЛЬН.*" /> ^ БЕЗ <regex pattern="ПРЕМЬЕР.*" /> ^ </pattern>
        <template>Тогда вас ждёт  ежемесячная плата в размере 2500 рублей</template>
    </category>


    <category>
        <pattern> ^ <regex pattern="КРЕДИТ.*|ВАЛЮТ.*|БОНУС.*"/> ^ </pattern>
        <template><think><set name="topic">sbpr_theme_choice</set></think><srai><input/></srai></template>
    </category>

    <category>
        <pattern> ^ <regex pattern="ПОЛУЧ.*|ВОЙТ.*" /> ^ <regex pattern="ПРЕМЬЕР.*" /> ^</pattern>
        <template>Вы можете подать заявку на оформление услуги онлайн. Далее с вами свяжется наш оператор и проинструктирует о дальнейших шагах. Оформляем?</template>
    </category>

    <category>
         <pattern> ^ <regex pattern="УСЛЫШ.*|УЗНАТ.*|.*СКА(Ж|З).*" /> ^ <regex pattern="БОНУС*" />  ^ </pattern>
            <template>
                Получив статус премьер в нашем банке, вы также получите карту с большими бонусами! 
                На эту карту будет больше начисляться бонусов Спасибо, и поэтому вы будете больше экономить. Оформляем?
            </template>
    </category>

</aiml>